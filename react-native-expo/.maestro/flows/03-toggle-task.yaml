appId: com.anonymous.reactnativeexpo
tags:
  - "core"
  - "toggle"
---
# Test: Toggle Task Completion
# This flow tests the task toggle functionality (mark complete/incomplete)
- launchApp:
    appId: com.anonymous.reactnativeexpo
- runFlow:
    when:
      visible: "Permission"
    commands:
      - tapOn: "Allow"
- assertVisible: 
    text: "Ditto Tasks"
# First create a task
- tapOn: "+"
- assertVisible: "Add Task"
- runScript: |
    const timestamp = Date.now();
    output.testTaskTitle = `Toggle Test Task ${timestamp}`;
- tapOn:
    id: "task-input"
- inputText: "${output.testTaskTitle}"
- tapOn: "Add Task"
- assertNotVisible: "Add Task"
- assertVisible: "${output.testTaskTitle}"
# Now toggle the task to completed
- tapOn:
    near: "${output.testTaskTitle}"
    id: "task-checkbox"
# Wait for sync to occur
- waitForAnimationToEnd
# Task should still be visible but marked as completed
- assertVisible: "${output.testTaskTitle}"
# Toggle back to incomplete
- tapOn:
    near: "${output.testTaskTitle}"
    id: "task-checkbox"
- waitForAnimationToEnd
# Task should still be visible and unmarked
- assertVisible: "${output.testTaskTitle}"